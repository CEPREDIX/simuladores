<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Temarios Cruzados | CEPREDIX</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* --- TEMA OSCURO NE√ìN --- */
        :root {
            --primary: #0a0a12;
            --secondary: #121225;
            --accent: #00d9ff;
            --accent-glow: rgba(0, 217, 255, 0.4);
            --success: #00ff9d;
            --warning: #ffcc00;
            --danger: #ff3860;
            --light: #f0f8ff;
            --border: rgba(0, 217, 255, 0.2);
            --text: #e0f7ff;
            --text-muted: #a0c2d1;
            --tag-bg: rgba(0, 217, 255, 0.15);
            --tag-text: #00d9ff;
            --general-tag-bg: rgba(255, 204, 0, 0.15);
            --general-tag-text: #ffcc00;
            --card-bg: rgba(18, 18, 37, 0.9);
            --card-border: rgba(0, 217, 255, 0.3);
            --shadow: 0 0 20px rgba(0, 217, 255, 0.2);
            --shadow-hover: 0 0 25px rgba(0, 217, 255, 0.3);
            --gradient-bg: linear-gradient(135deg, #0a0a12 0%, #121225 50%, #0a1a2a 100%);
            --gradient-header: linear-gradient(45deg, #0066cc, #00d9ff, #9d00ff, #ff00cc);
        }

        /* --- ESTILOS BASE --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: var(--gradient-bg);
            color: var(--text);
            line-height: 1.6;
            position: relative;
            min-height: 100vh;
            padding: 15px;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(0, 217, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(157, 0, 255, 0.05) 0%, transparent 50%);
            z-index: -2;
        }

        /* --- CONTENEDOR PRINCIPAL --- */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        /* --- ENCABEZADO CEPREDIX --- */
        .header {
            text-align: center;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            background: var(--gradient-header);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            border: 1px solid var(--card-border);
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .logo {
            width: 100px;
            height: 100px;
            margin: 0 auto 15px;
            background: url('https://i.imgur.com/I1unSiu.png') center/contain no-repeat;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            margin-bottom: 10px;
        }

        .header h2 {
            font-size: 1.5rem;
            color: var(--light);
            margin-bottom: 15px;
        }

        .header-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border: 1px solid var(--border);
            flex-wrap: wrap;
            gap: 15px;
        }

        .header-controls p {
            margin: 0;
            color: var(--light);
            font-size: 1rem;
        }

        /* --- BANNER DIN√ÅMICO --- */
        #banner-container {
            width: 100%;
            max-width: 900px;
            height: auto;
            margin: 20px auto 40px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            box-shadow: var(--shadow);
            border: 1px solid var(--card-border);
        }

        #banner-img {
            width: 100%;
            height: auto;
            object-fit: contain;
            display: block;
        }

        /* --- CONTROLES DE INTERFAZ --- */
        .tag-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9em;
            color: var(--text);
            cursor: pointer;
            padding: 10px 15px;
            background: var(--card-bg);
            border-radius: 8px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .tag-toggle:hover {
            background: rgba(0, 217, 255, 0.1);
            border-color: var(--accent);
        }

        .tag-toggle input {
            margin: 0;
            accent-color: var(--accent);
        }

        /* --- CONTROLES DE EXPORTACI√ìN --- */
        .export-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .export-btn {
            padding: 10px 20px;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .export-btn:hover {
            background: rgba(0, 217, 255, 0.1);
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .export-btn i {
            font-size: 1.2em;
        }

        /* --- PANEL DE FILTROS --- */
        .filters-panel {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--card-border);
            backdrop-filter: blur(10px);
        }

        .filters-panel h2 {
            color: var(--accent);
            margin-bottom: 25px;
            font-size: 1.8rem;
            text-align: center;
            text-shadow: 0 0 10px var(--accent-glow);
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }

        fieldset {
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 20px;
            background: rgba(10, 10, 18, 0.5);
            transition: all 0.3s ease;
        }

        fieldset:hover {
            border-color: var(--accent);
            box-shadow: 0 0 15px var(--accent-glow);
        }

        legend {
            font-weight: 600;
            color: var(--accent);
            padding: 0 15px;
            font-size: 1.1em;
            text-shadow: 0 0 5px var(--accent-glow);
        }

        .filter-group {
            max-height: 350px;
            overflow-y: auto;
            padding: 10px;
        }

        .filter-group::-webkit-scrollbar {
            width: 6px;
        }

        .filter-group::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }

        .filter-group::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 3px;
        }

        .filter-group label {
            display: block;
            margin-bottom: 12px;
            font-size: 0.95em;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 6px;
            transition: all 0.2s;
            color: var(--text);
        }

        .filter-group label:hover {
            background: rgba(0, 217, 255, 0.1);
            transform: translateX(5px);
        }

        .filter-group input[type="radio"],
        .filter-group input[type="checkbox"] {
            margin-right: 12px;
            accent-color: var(--accent);
        }

        .filter-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border);
        }

        .filter-section-title {
            font-weight: 600;
            color: var(--accent);
            margin: 15px 0 10px;
            font-size: 1em;
        }

        /* --- CONTROLES INFERIORES --- */
        .controls {
            margin-top: 25px;
            padding-top: 25px;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .filter-status {
            font-size: 0.95em;
            color: var(--text);
            background: rgba(0, 217, 255, 0.1);
            padding: 12px 20px;
            border-radius: 8px;
            border: 1px solid var(--border);
            flex: 1;
        }

        .filter-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        #applyFilters {
            background: var(--accent);
            color: var(--primary);
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 0 15px var(--accent-glow);
        }

        #applyFilters:hover {
            background: #00c7ff;
            transform: translateY(-2px);
            box-shadow: 0 0 25px rgba(0, 217, 255, 0.5);
        }

        #applyFilters:active {
            transform: translateY(0);
        }

        #warningMsg {
            color: var(--danger);
            font-weight: 600;
            font-size: 0.95em;
            background: rgba(255, 56, 96, 0.1);
            padding: 12px 20px;
            border-radius: 8px;
            border: 1px solid rgba(255, 56, 96, 0.3);
            display: none;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        #warningMsg.show {
            display: inline-block;
        }

        /* --- TABLAS COMPARATIVAS --- */
        .tables-section {
            margin: 40px 0;
        }

        details {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }

        details:hover {
            border-color: var(--accent);
            box-shadow: var(--shadow-hover);
        }

        summary {
            padding: 20px 25px;
            cursor: pointer;
            background: rgba(0, 217, 255, 0.1);
            font-weight: 600;
            list-style: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            font-size: 1.1em;
            color: var(--accent);
        }

        summary:hover {
            background: rgba(0, 217, 255, 0.2);
        }

        summary::after {
            content: '‚ñº';
            font-size: 0.9em;
            transition: transform 0.3s;
            color: var(--accent);
        }

        details[open] summary::after {
            content: '‚ñ≤';
        }

        .table-wrapper {
            overflow-x: auto;
            padding: 25px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95em;
            min-width: 700px;
        }

        th, td {
            border: 1px solid var(--border);
            padding: 15px 20px;
            text-align: left;
        }

        th {
            background: var(--secondary);
            color: var(--accent);
            font-weight: 600;
            position: sticky;
            top: 0;
            text-shadow: 0 0 5px var(--accent-glow);
        }

        tr:nth-child(even) {
            background: rgba(0, 217, 255, 0.05);
        }

        tr:hover {
            background: rgba(0, 217, 255, 0.1);
        }

        /* --- CONTENEDOR TEMARIO --- */
        .temario-container {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--card-border);
            backdrop-filter: blur(10px);
        }

        .temario-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border);
            flex-wrap: wrap;
            gap: 20px;
        }

        .temario-header h3 {
            color: var(--accent);
            font-size: 1.8rem;
            margin: 0;
        }

        .temario-stats {
            font-size: 0.95em;
            color: var(--text);
            background: rgba(0, 217, 255, 0.1);
            padding: 12px 20px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        /* --- ESTRUCTURA DEL TEMARIO --- */
        .temario-tree {
            font-size: 1em;
        }

        .bloque {
            margin-bottom: 40px;
        }

        .bloque-title {
            font-size: 1.4em;
            font-weight: 600;
            color: var(--accent);
            margin: 30px 0 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--accent);
            background: linear-gradient(90deg, rgba(0, 217, 255, 0.1), transparent);
            padding: 15px 20px;
            border-radius: 8px 8px 0 0;
            text-shadow: 0 0 5px var(--accent-glow);
        }

        .bloque-title:first-child {
            margin-top: 0;
        }

        ul.temario-list {
            list-style-type: none;
            padding-left: 0;
        }

        ul.temario-list ul {
            padding-left: 30px;
            margin-top: 10px;
        }

        li.temario-item {
            margin-bottom: 15px;
            padding: 12px 15px;
            border-radius: 8px;
            transition: all 0.3s ease;
            position: relative;
            border-left: 4px solid transparent;
            background: rgba(255, 255, 255, 0.02);
        }

        li.temario-item:hover {
            background: rgba(0, 217, 255, 0.1);
            border-left-color: var(--accent);
            transform: translateX(5px);
        }

        .node-content {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 20px;
        }

        .node-title {
            flex: 1;
            font-weight: 500;
            line-height: 1.6;
        }

        .node-title a {
            color: var(--accent);
            text-decoration: none;
            transition: all 0.3s ease;
            border-bottom: 1px dotted var(--accent);
        }

        .node-title a:hover {
            color: var(--light);
            border-bottom: 1px solid var(--light);
            text-shadow: 0 0 5px var(--accent-glow);
        }

        .node-title a.disabled {
            color: var(--text-muted);
            border-bottom: 1px dotted var(--text-muted);
            cursor: not-allowed;
            text-decoration: line-through;
            opacity: 0.6;
        }

        /* --- TAGS --- */
        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            max-width: 350px;
        }

        .tag {
            padding: 6px 12px;
            border-radius: 6px;
            background-color: var(--tag-bg);
            color: var(--tag-text);
            border: 1px solid rgba(0, 217, 255, 0.3);
            font-size: 0.8em;
            font-weight: 500;
            white-space: nowrap;
            transition: all 0.3s ease;
        }

        .tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 10px var(--accent-glow);
        }

        .tag.general {
            background-color: var(--general-tag-bg);
            color: var(--general-tag-text);
            border-color: rgba(255, 204, 0, 0.3);
        }

        .tag.UNAM { background-color: rgba(26, 83, 92, 0.3); color: #1ad5ff; }
        .tag.IPN { background-color: rgba(142, 68, 173, 0.3); color: #d27cff; }
        .tag.UAM { background-color: rgba(243, 156, 18, 0.3); color: #ffcc66; }
        .tag.BUAP { background-color: rgba(41, 128, 185, 0.3); color: #66ccff; }
        .tag['EXANI II'] { background-color: rgba(39, 174, 96, 0.3); color: #66ff99; }
        .tag.PAA { background-color: rgba(231, 76, 60, 0.3); color: #ff6666; }
        .tag.USEP { background-color: rgba(93, 109, 126, 0.3); color: #ccccff; }

        .hide-tags .tags-container {
            display: none;
        }

        /* --- NIVELES DE TEMARIO --- */
        .level-1 { font-weight: 600; font-size: 1.2em; padding-left: 0; }
        .level-2 { font-weight: 500; padding-left: 20px; }
        .level-3 { padding-left: 40px; }
        .level-4 { padding-left: 60px; font-size: 0.95em; }
        .level-5 { padding-left: 80px; font-size: 0.9em; color: var(--text-muted); }

        /* --- SECCI√ìN DE INFORMACI√ìN --- */
        .info-section {
            background: var(--card-bg);
            padding: 40px;
            margin-top: 50px;
            border-top: 4px solid var(--accent);
            border-radius: 15px;
            box-shadow: var(--shadow);
            border: 1px solid var(--card-border);
            backdrop-filter: blur(10px);
        }

        .info-section h2 {
            color: var(--accent);
            margin-bottom: 30px;
            font-size: 2rem;
            text-align: center;
            text-shadow: 0 0 10px var(--accent-glow);
        }

        .info-block {
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 1px solid var(--border);
        }

        .info-block:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .info-block h3 {
            color: var(--accent);
            margin-bottom: 20px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .info-block h3::before {
            content: '';
            width: 8px;
            height: 24px;
            background-color: var(--accent);
            border-radius: 2px;
            box-shadow: 0 0 10px var(--accent-glow);
        }

        .info-block p {
            margin-bottom: 15px;
            line-height: 1.7;
            color: var(--text);
        }

        /* --- LOADING --- */
        .loading {
            text-align: center;
            padding: 50px;
            color: var(--text-muted);
            font-size: 1.2em;
        }

        .loading-spinner {
            display: inline-block;
            width: 60px;
            height: 60px;
            border: 3px solid rgba(0, 217, 255, 0.1);
            border-top: 3px solid var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
            box-shadow: 0 0 15px var(--accent-glow);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* --- BOT√ìN WHATSAPP --- */
        .whatsapp-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: #25D366;
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 25px 15px 15px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(37, 211, 102, 0.4);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1000;
            transition: all 0.3s ease;
            text-decoration: none;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .whatsapp-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(37, 211, 102, 0.6);
            color: white;
        }

        .whatsapp-button:active {
            transform: translateY(-2px);
        }

        

        /* --- FOOTER --- */
        #footer {
            position: relative;
            width: 100%;
            margin-top: 60px;
            background: rgba(18, 18, 37, 0.95);
            backdrop-filter: blur(10px);
            color: white;
            padding: 25px 0;
            text-align: center;
            font-size: 13px;
            z-index: 100;
            border-top: 1px solid var(--card-border);
            border-radius: 15px 15px 0 0;
        }

        #footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        #footer-links {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 10px;
        }

        .footer-link, .social-link {
            color: var(--accent);
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .footer-link:hover, .social-link:hover {
            color: var(--light);
            text-shadow: 0 0 10px var(--accent-glow);
        }

        #copyright {
            color: var(--text-muted);
            font-size: 12px;
        }

        /* --- MODAL DE EXPORTACI√ìN --- */
        .export-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .export-modal.active {
            display: flex;
        }

        .export-modal-content {
            background: var(--card-bg);
            padding: 40px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            border: 1px solid var(--card-border);
            box-shadow: 0 0 40px rgba(0, 217, 255, 0.3);
        }

        .export-modal h3 {
            color: var(--accent);
            margin-bottom: 25px;
            text-align: center;
            font-size: 1.5rem;
        }

        .export-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 25px;
            text-align: center;
            color: var(--text);
        }

        .export-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .export-modal-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .export-modal-btn.primary {
            background: var(--accent);
            color: var(--primary);
        }

        .export-modal-btn.secondary {
            background: transparent;
            color: var(--text);
            border: 1px solid var(--border);
        }

        .export-modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        /* --- RESPONSIVE --- */
        @media (max-width: 1200px) {
            .filters-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 992px) {
            .header-controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .export-controls {
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 0 10px;
            }
            
            .filters-grid {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filter-actions {
                flex-direction: column;
            }
            
            #applyFilters {
                width: 100%;
                justify-content: center;
            }
            
            .node-content {
                flex-direction: column;
                gap: 10px;
            }
            
            .tags-container {
                max-width: 100%;
                justify-content: flex-start;
            }
            
            .whatsapp-button {
                bottom: 20px;
                right: 20px;
                padding: 15px 25px;
                font-size: 1em;
            }
            
            .temario-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .export-controls {
                flex-wrap: wrap;
                justify-content: center;
            }
        }

        @media (max-width: 576px) {
            .header {
                padding: 20px 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .header h2 {
                font-size: 1.2rem;
            }
            
            .filters-panel,
            .temario-container,
            .info-section {
                padding: 20px;
            }
            
            fieldset {
                padding: 15px;
            }
            
            summary {
                padding: 15px;
            }
            
            .table-wrapper {
                padding: 15px;
            }
            
            th, td {
                padding: 10px 15px;
            }
            
            .whatsapp-button {
                bottom: 15px;
                right: 15px;
                padding: 12px 20px;
                font-size: 0.9em;
            }
            
            #footer-links {
                gap: 15px;
            }
            
            .footer-link, .social-link {
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .header h2 {
                font-size: 1rem;
            }
            
            .export-btn {
                padding: 8px 15px;
                font-size: 0.9em;
            }
            
            .temario-header h3 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <audio id="button-sound" src="https://github.com/IALUMX/Audios_cepredix/raw/refs/heads/main/Clic_sound.mp3" preload="auto"></audio>
    <audio id="correct-sound" src="https://github.com/IALUMX/Audios_cepredix/raw/refs/heads/main/Correct_sound.mp3" preload="auto"></audio>
    <audio id="incorrect-sound" src="https://github.com/IALUMX/Audios_cepredix/raw/refs/heads/main/Incorrect_sound.mp3" preload="auto"></audio>

    <div class="container">
        <header class="header">
            <div class="logo"></div>
            <h1>Generador de Temarios Cruzados CEPREDIX</h1>
            <h2>Tu herramienta inteligente para preparaci√≥n universitaria</h2>
            
            <div class="header-controls">
                <p>Filtra el temario seg√∫n los procesos de admisi√≥n que vas a presentar</p>
                <div class="export-controls">
                    <div class="tag-toggle" title=".">
                        <input type="checkbox" id="toggleTags">
                        <label for="toggleTags">.</label>
                    </div>
                    </div>
            </div>
        </header>

        <div id="banner-container" style="display: none;">
            <a id="banner-link" href="#" target="_blank">
                <img id="banner-img" src="" alt="Aviso CEPREDIX">
            </a>
            <audio id="banner-audio-player"></audio>
        </div>

        <section class="tables-section">
            <details>
                <summary>Tabla 1. Comparativa de Clasificaci√≥n de √Åreas</summary>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Enfoque / Perfil</th>
                                <th>UNAM (4 √Åreas)</th>
                                <th>IPN (3 √Åreas)</th>
                                <th>UAM (4 Divisiones)</th>
                                <th>BUAP (4 √Åreas)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Ingenier√≠as y Exactas</td>
                                <td>√Årea 1: F√≠sico-Matem√°ticas y de las Ingenier√≠as</td>
                                <td>√Årea 1: Ingenier√≠a y Ciencias F√≠sico-Matem√°ticas</td>
                                <td>CBI: Ciencias B√°sicas e Ingenier√≠a / CNI (Cuajimalpa)</td>
                                <td>√Årea: Ciencias Exactas e Ingenier√≠as</td>
                            </tr>
                            <tr>
                                <td>Salud y Biolog√≠a</td>
                                <td>√Årea 2: Ciencias Biol√≥gicas, Qu√≠micas y de la Salud</td>
                                <td>√Årea 2: Ciencias M√©dico-Biol√≥gicas</td>
                                <td>CBS: Ciencias Biol√≥gicas y de la Salud</td>
                                <td>√Årea: Ciencias Naturales y de la Salud</td>
                            </tr>
                            <tr>
                                <td>Sociales y Gobierno</td>
                                <td>√Årea 3: Ciencias Sociales</td>
                                <td>√Årea 3: Ciencias Sociales y Administrativas</td>
                                <td>CSH: Ciencias Sociales y Humanidades</td>
                                <td>√Årea: Ciencias Sociales y Humanidades</td>
                            </tr>
                            <tr>
                                <td>Econom√≠a y Negocios</td>
                                <td>(Incluido en √Årea 3)</td>
                                <td>(Incluido en √Årea 3)</td>
                                <td>(Incluido en CSH)</td>
                                <td>√Årea: Ciencias Econ√≥mico-Administrativas</td>
                            </tr>
                            <tr>
                                <td>Humanidades y Artes</td>
                                <td>√Årea 4: Humanidades y de las Artes</td>
                                <td>N/A (No tiene oferta fuerte en artes/humanidades)</td>
                                <td>CAD: Ciencias y Artes para el Dise√±o / CCD (Cuajimalpa)</td>
                                <td>(Incluido en Sociales y Humanidades)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </details>

            <details>
                <summary>Tabla 2. Comparativa T√©cnica del Examen</summary>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Caracter√≠stica</th>
                                <th>UNAM</th>
                                <th>IPN</th>
                                <th>UAM</th>
                                <th>EXANI-II (Ceneval)</th>
                                <th>BUAP (EGA-I)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Total Preguntas</td>
                                <td>120</td>
                                <td>140</td>
                                <td>80</td>
                                <td>168 (138 cuentan*)</td>
                                <td>120 - 130 (Aprox)</td>
                            </tr>
                            <tr>
                                <td>Duraci√≥n</td>
                                <td>3 horas</td>
                                <td>3 horas</td>
                                <td>2 horas</td>
                                <td>4.5 horas</td>
                                <td>Variable (por secciones)</td>
                            </tr>
                            <tr>
                                <td>Formato</td>
                                <td>Presencial (Papel)</td>
                                <td>Presencial / Digital</td>
                                <td>Digital (En l√≠nea/Sede)</td>
                                <td>Presencial (Papel)</td>
                                <td>Digital (Sede)</td>
                            </tr>
                            <tr>
                                <td>Calculadora</td>
                                <td>üö´ Prohibida</td>
                                <td>üö´ Prohibida</td>
                                <td>üö´ Prohibida</td>
                                <td>‚úÖ B√°sica permitida</td>
                                <td>‚úÖ (Software en pantalla)</td>
                            </tr>
                            <tr>
                                <td>Ingl√©s</td>
                                <td>No cuenta (Diagn√≥stico)</td>
                                <td>Cuenta (Comprensi√≥n)</td>
                                <td>No cuenta (Diagn√≥stico)</td>
                                <td>No cuenta (Diagn√≥stico)</td>
                                <td>Diagn√≥stico</td>
                            </tr>
                            <tr>
                                <td>Promedio Prepa</td>
                                <td>Requisito (M√≠n 7.0)</td>
                                <td>Requisito (M√≠n 6.0)</td>
                                <td>Vale el 30% de la nota final</td>
                                <td>Requisito de registro</td>
                                <td>Requisito de registro</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </details>

            <details>
                <summary>Tabla 3. Resumen de Estilo de Pregunta</summary>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Examen</th>
                                <th>Estilo de la Pregunta</th>
                                <th>Clave del √âxito</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>UNAM</td>
                                <td>Enciclop√©dico / Memor√≠stico. Pregunta datos exactos, fechas, autores y definiciones te√≥ricas.</td>
                                <td>Mucha memoria y bancos de preguntas repetidas de a√±os anteriores.</td>
                            </tr>
                            <tr>
                                <td>IPN</td>
                                <td>Procedimental / T√©cnico. Pocas preguntas te√≥ricas, muchos problemas matem√°ticos y de f√≠sica para resolver "a l√°piz".</td>
                                <td>Rapidez resolviendo ejercicios de √°lgebra y c√°lculo.</td>
                            </tr>
                            <tr>
                                <td>UAM</td>
                                <td>L√≥gico / Abstracto. Lecturas muy largas y complejas. Problemas de l√≥gica, no de "cuentas".</td>
                                <td>Comprensi√≥n lectora avanzada y razonamiento abstracto. Promedio alto.</td>
                            </tr>
                            <tr>
                                <td>EXANI-II</td>
                                <td>Pr√°ctico / Modular. Redacci√≥n indirecta (corregir errores). Conocimiento muy especializado en los m√≥dulos.</td>
                                <td>Dominar los 2 m√≥dulos espec√≠ficos y reglas gramaticales.</td>
                            </tr>
                            <tr>
                                <td>BUAP</td>
                                <td>Aptitudinal. Similar al College Board (SAT). Mide potencial de aprendizaje m√°s que conocimiento acumulado.</td>
                                <td>Agilidad mental y pr√°ctica con simuladores digitales.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </details>
        </section>

        <section class="filters-panel">
            <h2>Selecciona tus procesos de admisi√≥n</h2>
            <div class="filters-grid">
                <fieldset>
                    <legend>UNAM</legend>
                    <div class="filter-group">
                        <label><input type="radio" name="unam" value="" checked> Ninguna</label>
                        <label><input type="radio" name="unam" value="UNAM A1"> √Årea 1: F√≠sico-Matem√°ticas e Ingenier√≠as</label>
                        <label><input type="radio" name="unam" value="UNAM A2"> √Årea 2: Biol√≥gicas, Qu√≠micas y de la Salud</label>
                        <label><input type="radio" name="unam" value="UNAM A3"> √Årea 3: Ciencias Sociales</label>
                        <label><input type="radio" name="unam" value="UNAM A4"> √Årea 4: Humanidades y Artes</label>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>IPN</legend>
                    <div class="filter-group">
                        <label><input type="radio" name="ipn" value="" checked> Ninguna</label>
                        <label><input type="radio" name="ipn" value="IPN A1"> √Årea 1: Ingenier√≠a y Ciencias F√≠sico-Matem√°ticas</label>
                        <label><input type="radio" name="ipn" value="IPN A2"> √Årea 2: Ciencias M√©dico-Biol√≥gicas</label>
                        <label><input type="radio" name="ipn" value="IPN A3"> √Årea 3: Ciencias Sociales y Administrativas</label>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>UAM</legend>
                    <div class="filter-group">
                        <label><input type="radio" name="uam" value="" checked> Ninguna</label>
                        <label><input type="radio" name="uam" value="UAM A1"> CBI: Ciencias B√°sicas e Ingenier√≠a</label>
                        <label><input type="radio" name="uam" value="UAM A2"> CBS: Ciencias Biol√≥gicas y de la Salud</label>
                        <label><input type="radio" name="uam" value="UAM A3"> CSH: Ciencias Sociales y Humanidades</label>
                        <label><input type="radio" name="uam" value="UAM A4"> CAD: Ciencias y Artes para el Dise√±o</label>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>BUAP</legend>
                    <div class="filter-group">
                        <label><input type="radio" name="buap" value="" checked> Ninguna</label>
                        <label><input type="radio" name="buap" value="BUAP A1"> √Årea 1: Ciencias Naturales y de la Salud</label>
                        <label><input type="radio" name="buap" value="BUAP A2"> √Årea 2: Ciencias Exactas e Ingenier√≠as</label>
                        <label><input type="radio" name="buap" value="BUAP A3"> √Årea 3: Ciencias Sociales y Humanidades</label>
                        <label><input type="radio" name="buap" value="BUAP A4"> √Årea 4: Ciencias Econ√≥mico-Administrativas</label>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>EXANI II (Ceneval)</legend>
                    <div class="filter-group">
                        <div class="filter-section">
                            <div class="filter-section-title">Tronco Com√∫n (M√°x 3)</div>
                            <label><input type="checkbox" class="exani-check exani-tronco" value="EXANI II MAT"> Pensamiento Matem√°tico [EXANI II MAT]</label>
                            <label><input type="checkbox" class="exani-check exani-tronco" value="EXANI II ESP"> Comprensi√≥n Lectora y Redacci√≥n [EXANI II ESP]</label>
                            <label><input type="checkbox" class="exani-check exani-tronco" value="EXANI II ENG"> Ingl√©s [EXANI II ENG]</label>
                        </div>
                        
                        <div class="filter-section">
                            <div class="filter-section-title">M√≥dulos Disciplinares (M√°x 2)</div>
                            <label><input type="checkbox" class="exani-check exani-mod" value="EXANI II MOD01"> Administraci√≥n</label>
                            <label><input type="checkbox" class="exani-check exani-mod" value="EXANI II MOD02"> Aritm√©tica</label>
                            <label><input type="checkbox" class="exani-check exani-mod" value="EXANI II MOD03"> Biolog√≠a</label>
                            <label><input type="checkbox" class="exani-check exani-mod" value="EXANI II MOD04"> C√°lculo</label>
                            <label><input type="checkbox" class="exani-check exani-mod" value="EXANI II MOD05"> Ciencias de la Salud</label>
                            <label><input type="checkbox" class="exani-check exani-mod" value="EXANI II MOD06"> Derecho</label>
                            <label><input type="checkbox" class="exani-check exani-mod" value="EXANI II MOD07"> Econom√≠a</label>
                            <label><input type="checkbox" class="exani-check exani-mod" value="EXANI II MOD08"> Filosof√≠a</label>
                            <label><input type="checkbox" class="exani-check exani-mod" value="EXANI II MOD09"> F√≠sica</label>
                            <label><input type="checkbox" class="exani-check exani-mod" value="EXANI II MOD10"> Historia</label>
                            <label><input type="checkbox" class="exani-check exani-mod" value="EXANI II MOD11"> Literatura</label>
                            <label><input type="checkbox" class="exani-check exani-mod" value="EXANI II MOD12"> Matem√°ticas Financieras</label>
                            <label><input type="checkbox" class="exani-check exani-mod" value="EXANI II MOD13"> Premedicina (vale por 2 m√≥dulos)</label>
                            <label><input type="checkbox" class="exani-check exani-mod" value="EXANI II MOD14"> Probabilidad y Estad√≠stica</label>
                            <label><input type="checkbox" class="exani-check exani-mod" value="EXANI II MOD15"> Psicolog√≠a</label>
                            <label><input type="checkbox" class="exani-check exani-mod" value="EXANI II MOD16"> Qu√≠mica</label>
                        </div>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>Otras Instituciones</legend>
                    <div class="filter-group">
                        <label><input type="checkbox" name="usep" value="USEP"> USEP (Universidad de la Salud del Estado de Puebla)</label>
                        <label><input type="checkbox" name="paa" value="PAA"> PAA (Prueba de Aptitud Acad√©mica - UDG)</label>
                    </div>
                </fieldset>
            </div>

            <div class="controls">
                <div class="filter-status" id="filterStatus">
                    No hay filtros aplicados
                </div>
                <div class="filter-actions" style="gap: 15px; flex-wrap: wrap;">
                    <span id="warningMsg"></span>
                    
                    <button id="cleanFiltersBtn" style="background: #ff3860; color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer;">
                        <i class="fas fa-trash"></i> Limpiar
                    </button>

                    <button id="applyFilters">
                        <i class="fas fa-filter"></i> Aplicar Filtros
                    </button>

                    <button id="exportBtn" class="export-btn" style="background: var(--accent); color: var(--primary); margin: 0;">
                        <i class="fas fa-download"></i> Descargar
                    </button>
                </div>
            </div>
        </section>

        <div id="temarioDisplay" class="temario-container hide-tags">
            <div class="temario-header">
                <h3>Temario Filtrado</h3>
                <div class="temario-stats" id="temarioStats">
                    Cargando temario...
                </div>
            </div>
            <div class="loading" id="loadingTemario">
                <div class="loading-spinner"></div>
                <p>Cargando temario desde GitHub...</p>
            </div>
            <div id="temarioContent" style="display: none;">
                </div>
        </div>

        <section class="info-section">
            <h2>Resumen Estrat√©gico - "Letras Chiquitas"</h2>
            
            <div class="info-block">
                <h3>1. UNAM (Universidad Nacional Aut√≥noma de M√©xico)</h3>
                <p><strong>El reto de las Carreras de Ingreso Indirecto:</strong> No puedes registrarte a estas carreras directamente. Primero debes ser aceptado en una carrera "origen" y despu√©s aprobar un examen interno adicional. Si repruebas el interno, te quedas en la carrera origen.</p>
                <p><strong>Carreras con Prerrequisitos:</strong> Aqu√≠ s√≠ te registras directo, pero debes aprobar un examen de habilidades antes del examen de conocimientos generales. Si no pasas el prerrequisito, tu registro se cancela.</p>
                <p><strong>El peso de las √Åreas:</strong> Tu n√∫mero de aciertos vale diferente seg√∫n el √°rea. Un error en Matem√°ticas te cuesta m√°s caro si vas a Ingenier√≠a (√Årea 1) que si vas a Artes (√Årea 4).</p>
            </div>

            <div class="info-block">
                <h3>2. IPN (Instituto Polit√©cnico Nacional)</h3>
                <p><strong>La Trampa de las 3 Opciones:</strong> El IPN te permite elegir 3 carreras en orden de preferencia. El sistema asigna lugares a la Opci√≥n 1 hasta llenarla. Rara vez se asignan lugares en la Opci√≥n 2 o 3 en carreras de alta demanda.</p>
                <p><strong>Ingl√©s intermedio necesario:</strong> Aunque el ingl√©s no siempre suma puntos al puntaje global de admisi√≥n, el nivel de ingl√©s dentro de las carreras es exigente desde el primer semestre.</p>
                <p><strong>Sedes For√°neas (UPIIs):</strong> El IPN ya no es solo CDMX. Verificar la sede es vital; muchos aspirantes eligen la carrera sin ver que se imparte en otro estado.</p>
            </div>

            <div class="info-block">
                <h3>3. UAM (Universidad Aut√≥noma Metropolitana)</h3>
                <p><strong>La Regla del 30% (Promedio de Bachillerato):</strong> Tu calificaci√≥n final se compone as√≠: 70% Examen de Selecci√≥n + 30% Promedio de Preparatoria. Si tienes un promedio bajo, est√°s obligado a tener un examen casi perfecto.</p>
                <p><strong>El Sistema Modular (Unidad Xochimilco):</strong> Si eliges la unidad Xochimilco, no tendr√°s "materias", sino "M√≥dulos" de investigaci√≥n interdisciplinaria.</p>
                <p><strong>Razonamiento sobre Conocimiento:</strong> El examen UAM premia la inteligencia l√≥gica y la comprensi√≥n lectora profunda m√°s que la memorizaci√≥n.</p>
            </div>

            <div class="info-block">
                <h3>4. EXANI-II (Ceneval - UAEMex, UADY, UANL, UV, etc.)</h3>
                <p><strong>El Peligro de los M√≥dulos Espec√≠ficos:</strong> CADA UNIVERSIDAD ELIGE QU√â M√ìDULOS APLICAR PARA CADA CARRERA. Debes leer la convocatoria espec√≠fica de TU universidad.</p>
                <p><strong>√çndice CENEVAL (ICNE):</strong> El resultado no se da en "aciertos", sino en un √≠ndice que suele ir de 700 a 1300 puntos.</p>
                <p><strong>Calculadora B√°sica:</strong> A diferencia de la UNAM o IPN, Ceneval suele permitir el uso de una calculadora simple.</p>
            </div>

            <div class="info-block">
                <h3>5. BUAP (Benem√©rita Universidad Aut√≥noma de Puebla)</h3>
                <p><strong>Prueba de Aptitud Digital:</strong> El examen EGA-I se aplica en computadora en las sedes de la universidad. No es en papel.</p>
                <p><strong>Requisitos Adicionales por √Årea:</strong> Artes: portafolio o audici√≥n. Salud: puntaje de corte extremadamente alto.</p>
                <p><strong>Cursos Proped√©uticos:</strong> Algunas carreras pueden requerir un curso proped√©utico con valor curricular.</p>
            </div>

            <div class="info-block">
                <h3>6. Prueba PAA (Universidad de Guadalajara)</h3>
                <p><strong>Carreras con Requisitos Adicionales:</strong> Muchas carreras, principalmente las del CUAAD, exigen aprobar una evaluaci√≥n de habilidades espec√≠ficas adem√°s de la PAA.</p>
                <p><strong>UDGVirtual (SUV):</strong> Si decides estudiar una licenciatura en la modalidad 100% en l√≠nea, no presentas el examen PAA. En su lugar, realizas un Curso de Selecci√≥n en l√≠nea.</p>
                <p><strong>F√≥rmula de Puntaje:</strong> Puntaje Total = Promedio de Bachillerato (50%) + Resultado PAA (50%).</p>
            </div>

            <div class="info-block">
                <h3>7. USEP (Universidad de la Salud del Estado de Puebla)</h3>
                <p><strong>Exclusivo √°rea de la salud:</strong> Ofrece exclusivamente programas de licenciatura en el √°rea de la salud: Medicina, Enfermer√≠a, Nutrici√≥n, Psicolog√≠a, Terapia F√≠sica, Estomatolog√≠a.</p>
                <p><strong>Examen √∫nico con adaptaciones:</strong> Todas estas carreras comparten el mismo examen de conocimientos b√°sicos, pero se diferencian en el examen de conocimientos especializados.</p>
            </div>
        </section>
    </div>

    <a href="https://wa.link/cl0ko9" class="whatsapp-button" target="_blank">
        <i class="fab fa-whatsapp" style="font-size: 1.2em;"></i> CONSULTAR TEMARIOS OFICIALES V√çAS WHATSAPP
    </a>

    <div id="exportModal" class="export-modal">
        <div class="export-modal-content">
            <h3>Exportar Temario</h3>
            <div class="export-options">
               <p style="margin-bottom: 20px;">Se descargar√° el temario en formato de texto (.txt)</p>
            </div>
            <div class="export-actions">
                <button id="confirmExport" class="export-modal-btn primary">
                    <i class="fas fa-download"></i> Descargar .TXT
                </button>
                <button id="cancelExport" class="export-modal-btn secondary">
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <div id="footer">
        <div id="footer-content">
            <div id="footer-links">
                <a href="#" class="footer-link">Aviso de Privacidad</a>
                <span class="text-gray-500 hidden sm:inline">|</span>
                <a href="https://www.facebook.com/cepredix/" target="_blank" class="footer-link social-link">
                    <i class="fab fa-facebook"></i> Facebook
                </a>
                <span class="text-gray-500 hidden sm:inline">|</span>
                <a href="https://www.instagram.com/cepredix/" target="_blank" class="footer-link social-link">
                    <i class="fab fa-instagram"></i> Instagram
                </a>
                <span class="text-gray-500 hidden sm:inline">|</span>
                <a href="https://www.tiktok.com/@cepredix" target="_blank" class="footer-link social-link">
                    <i class="fab fa-tiktok"></i> TikTok
                </a>
                <span class="text-gray-500 hidden sm:inline">|</span>
                <a href="https://www.youtube.com/@Cepredix" target="_blank" class="footer-link social-link">
                    <i class="fab fa-youtube"></i> YouTube
                </a>
            </div>
            <div id="copyright">
                &copy; CEPREDIX 2026 - Generador de Temarios Cruzados. Todos los derechos reservados.
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // CONFIGURACI√ìN Y CONSTANTES
        // ============================================
        const TEMARIO_URL = 'https://raw.githubusercontent.com/IALUMX/recursos-web/main/temario-maestro-uni.txt';
        const ADS_CSV_URL = "https://docs.google.com/spreadsheets/d/1VkMosrVw7vJdZqGvInDcu3oKlK7WZlTrWAnH2YHqrew/export?format=csv&gid=0";
        
        const UNIVERSITY_GROUPS = {
            'UNAM': ['UNAM', 'UNAM A1', 'UNAM A2', 'UNAM A3', 'UNAM A4'],
            'IPN': ['IPN', 'IPN A1', 'IPN A2', 'IPN A3'],
            'UAM': ['UAM', 'UAM A1', 'UAM A2', 'UAM A3', 'UAM A4'],
            'BUAP': ['BUAP', 'BUAP A1', 'BUAP A2', 'BUAP A3', 'BUAP A4'],
            'EXANI II': ['EXANI II MAT', 'EXANI II ESP', 'EXANI II ENG',
                        'EXANI II MOD01', 'EXANI II MOD02', 'EXANI II MOD03',
                        'EXANI II MOD04', 'EXANI II MOD05', 'EXANI II MOD06',
                        'EXANI II MOD07', 'EXANI II MOD08', 'EXANI II MOD09',
                        'EXANI II MOD10', 'EXANI II MOD11', 'EXANI II MOD12',
                        'EXANI II MOD13', 'EXANI II MOD14', 'EXANI II MOD15',
                        'EXANI II MOD16'],
            'PAA': ['PAA'],
            'USEP': ['USEP'],
            'GENERAL': ['GENERAL']
        };

        // ============================================
        // VARIABLES GLOBALES
        // ============================================
        let temarioData = [];
        let currentFilters = new Set();
        let expandedFilters = new Set();
        let mainBanner = null;
        let pubBanners = [];

        // ============================================
        // FUNCIONES DE INICIALIZACI√ìN
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar sonidos
            const buttonSound = document.getElementById('button-sound');
            
            // Funci√≥n para reproducir sonido
            function playClickSound() {
                if(buttonSound) {
                    buttonSound.currentTime = 0;
                    buttonSound.volume = 0.5;
                    buttonSound.play().catch(e => console.error("Error audio:", e));
                }
            }
            
            // Cargar banner din√°mico
            loadBanner();
            
            // Cargar temario desde GitHub
            loadTemario();
            
            // Configurar event listeners
            setupEventListeners();
            
            // Configurar controles EXANI II
            setupExaniControls();
            
            // Configurar controles de exportaci√≥n
            setupExportControls();
            
            // Aplicar filtros por defecto (ninguno)
            applyFilters();
            
            // Asignar sonido a botones
            document.querySelectorAll('button, .export-btn, .footer-link, .social-link').forEach(btn => {
                btn.addEventListener('click', playClickSound);
            });
        });

        // ============================================
        // CARGA DEL BANNER DIN√ÅMICO
        // ============================================
        function loadBanner() {
            fetch(ADS_CSV_URL)
                .then(r => r.text())
                .then(csv => {
                    const rows = csv.split("\n").slice(1);
                    rows.forEach(row => {
                        const cols = row.split(",");
                        if (cols.length >= 5) {
                            const item = {
                                Imagen: cols[0].trim(),
                                Audio: cols[1].trim(),
                                Infolink: cols[2].trim(),
                                Tipo: cols[4].trim().replace(/\r/g, "")
                            };

                            if (item.Tipo === "BANNER-PRINCIPAL") {
                                mainBanner = item;
                            } else if (item.Tipo === "BANNER-PUB") {
                                pubBanners.push(item);
                            }
                        }
                    });
                    
                    initBannerCycle();
                }).catch(err => {
                    console.error("Error al cargar publicidad:", err);
                });
        }

        function initBannerCycle() {
            const bannerContainer = document.getElementById('banner-container');
            
            if (!mainBanner) { 
                bannerContainer.style.display = 'none'; 
                return; 
            }

            bannerContainer.style.display = 'block';
            runMainBanner();
        }

        function runMainBanner() {
            if (!mainBanner) return;
            setBannerContent(mainBanner);

            setTimeout(() => {
                runPubBanner();
            }, 50000); 
        }

        function runPubBanner() {
            if (pubBanners.length > 0) {
                const randomPub = pubBanners[Math.floor(Math.random() * pubBanners.length)];
                setBannerContent(randomPub);
                
                setTimeout(() => {
                    runMainBanner();
                }, 10000);
            } else {
                runMainBanner();
            }
        }

        function setBannerContent(item) {
            const imgEl = document.getElementById('banner-img');
            const linkEl = document.getElementById('banner-link');
            const audioEl = document.getElementById('banner-audio-player');

            if (imgEl) imgEl.src = item.Imagen;
            
            if (linkEl) {
                if (item.Infolink && item.Infolink.length > 5) {
                    linkEl.href = item.Infolink;
                    linkEl.style.pointerEvents = "auto";
                    linkEl.style.cursor = "pointer";
                } else {
                    linkEl.removeAttribute('href');
                    linkEl.style.pointerEvents = "none";
                    linkEl.style.cursor = "default";
                }
            }

            if (audioEl && item.Audio && item.Audio.length > 5) {
                audioEl.src = item.Audio;
                audioEl.play().catch(e => console.log("Audio banner silenciado por navegador")); 
            }
        }

        // ============================================
        // CARGA DEL TEMARIO
        // ============================================
        async function loadTemario() {
            try {
                // Agregar timestamp para evitar cache
                const urlWithCacheBuster = `${TEMARIO_URL}?v=${new Date().getTime()}`;
                console.log('Cargando temario desde:', urlWithCacheBuster);
                
                const response = await fetch(urlWithCacheBuster);
                
                if (!response.ok) {
                    throw new Error(`Error HTTP: ${response.status}`);
                }
                
                const text = await response.text();
                console.log('Temario cargado, tama√±o:', text.length, 'caracteres');
                
                // Parsear el texto a estructura de datos
                temarioData = parseTemarioText(text);
                console.log('Temario parseado:', temarioData.length, '√≠tems');
                
                // Ocultar loading y mostrar contenido
                document.getElementById('loadingTemario').style.display = 'none';
                document.getElementById('temarioContent').style.display = 'block';
                
                // Renderizar temario completo inicialmente
                renderTemario();
                
            } catch (error) {
                console.error('Error cargando temario:', error);
                document.getElementById('loadingTemario').innerHTML = `
                    <div style="color: #ff3860;">
                        <h4>Error cargando el temario</h4>
                        <p>${error.message}</p>
                        <p>Intentando cargar datos de respaldo...</p>
                    </div>
                `;
                
                // Intentar cargar datos de respaldo
                loadBackupData();
            }
        }

        function parseTemarioText(text) {
            const lines = text.split('\n');
            const temario = [];
            let currentBlock = null;
            
            // Saltar la l√≠nea de encabezado si existe
            let startIndex = lines[0].includes('NIVEL\tCONTENIDO\tTAGS') ? 1 : 0;
            
            for (let i = startIndex; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;
                
                // Separar por tabulaciones
                const parts = line.split('\t');
                if (parts.length < 3) continue;
                
                const nivel = parts[0].trim();
                const contenido = parts[1].trim();
                let tags = parts[2].trim();
                const url = parts.length > 3 ? parts[3].trim() : '';
                
                // Parsear tags (eliminar corchetes y separar por coma)
                tags = tags.replace(/[\[\]]/g, '').split(',').map(tag => tag.trim());
                
                // Determinar nivel
                const nivelParts = nivel.split('.');
                const nivelNum = nivelParts.length;
                
                // Crear objeto del √≠tem
                const item = {
                    id: `${i}-${nivel}`,
                    nivel: nivel,
                    nivelNum: nivelNum,
                    contenido: contenido,
                    tags: tags,
                    url: url,
                    children: []
                };
                
                // Si es nivel 1, es un bloque
                if (nivelNum === 1) {
                    currentBlock = item;
                    temario.push(item);
                } else if (currentBlock) {
                    // Encontrar el padre apropiado
                    let parent = findParentItem(currentBlock, nivel);
                    if (parent) {
                        parent.children.push(item);
                    } else {
                        // Si no se encuentra padre, agregar al bloque actual
                        currentBlock.children.push(item);
                    }
                } else {
                    // Si no hay bloque actual, agregar directamente
                    temario.push(item);
                }
            }
            
            return temario;
        }

        function findParentItem(block, nivel) {
            const nivelParts = nivel.split('.');
            if (nivelParts.length <= 1) return null;
            
            // Eliminar la √∫ltima parte para obtener el nivel padre
            const parentNivel = nivelParts.slice(0, -1).join('.');
            
            // Buscar recursivamente
            function searchInChildren(items) {
                for (const item of items) {
                    if (item.nivel === parentNivel) {
                        return item;
                    }
                    if (item.children && item.children.length > 0) {
                        const found = searchInChildren(item.children);
                        if (found) return found;
                    }
                }
                return null;
            }
            
            return searchInChildren([block]);
        }

        function loadBackupData() {
            // Datos de ejemplo m√≠nimos para respaldo
            temarioData = [
                {
                    id: '1',
                    nivel: '1',
                    nivelNum: 1,
                    contenido: 'Bloque I: Lengua, Habilidades Ling√º√≠sticas y Literatura',
                    tags: ['UNAM', 'IPN', 'UAM', 'EXANI II ESP', 'BUAP', 'PAA', 'USEP'],
                    url: 'https://simuladores.cepredix.com.mx/00-espera-un-poco-un-poquito-maaaaas.html',
                    children: [
                        {
                            id: '1.1',
                            nivel: '1.1',
                            nivelNum: 2,
                            contenido: 'Funciones y Formas del Discurso',
                            tags: ['UNAM', 'IPN', 'PAA'],
                            url: 'https://simuladores.cepredix.com.mx/00-espera-un-poco-un-poquito-maaaaas.html',
                            children: []
                        }
                    ]
                }
            ];
            
            document.getElementById('loadingTemario').style.display = 'none';
            document.getElementById('temarioContent').style.display = 'block';
            renderTemario();
        }

        // ============================================
        // CONFIGURACI√ìN DE CONTROLES
        // ============================================
        function setupEventListeners() {
            // Bot√≥n aplicar filtros
            document.getElementById('applyFilters').addEventListener('click', applyFilters);
            // --- NUEVO C√ìDIGO: Funci√≥n para Limpiar Filtros ---
            const cleanBtn = document.getElementById('cleanFiltersBtn');
            if (cleanBtn) {
                cleanBtn.addEventListener('click', function() {
                    // 1. Desmarcar todos los checkboxes
                    document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
                    
                    // 2. Resetear radios a la opci√≥n vac√≠a
                    document.querySelectorAll('input[type="radio"]').forEach(radio => {
                        radio.checked = (radio.value === "");
                    });

                    // 3. Reactivar m√≥dulos EXANI si estaban bloqueados
                    document.querySelectorAll('.exani-mod').forEach(cb => cb.disabled = false);

                    // 4. Actualizar la vista (esto mostrar√° todo de nuevo)
                    applyFilters();
                });
            }
            // --- FIN DEL NUEVO C√ìDIGO ---
            
            // Toggle para mostrar/ocultar tags
            document.getElementById('toggleTags').addEventListener('change', function(e) {
                const container = document.getElementById('temarioDisplay');
                if (e.target.checked) {
                    container.classList.remove('hide-tags');
                } else {
                    container.classList.add('hide-tags');
                }
            });
            
            // Event listeners para cambios en filtros
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.addEventListener('change', updateFilterStatus);
            });
            
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', updateFilterStatus);
            });
        }

        function setupExaniControls() {
            const exaniTronco = document.querySelectorAll('.exani-tronco');
            const exaniMod = document.querySelectorAll('.exani-mod');
            const premedicina = document.querySelector('input[value="EXANI II MOD13"]');
            
            // Limitar tronco com√∫n a 3 selecciones
            exaniTronco.forEach(cb => {
                cb.addEventListener('change', function() {
                    const checked = document.querySelectorAll('.exani-tronco:checked');
                    if (checked.length > 3) {
                        this.checked = false;
                        showWarning('M√°ximo 3 m√≥dulos de tronco com√∫n');
                    }
                    updateExaniModState();
                });
            });
            
            // Controlar m√≥dulos disciplinares
            exaniMod.forEach(cb => {
                cb.addEventListener('change', function() {
                    updateExaniModState();
                });
            });
            
            // Control especial para premedicina
            if (premedicina) {
                premedicina.addEventListener('change', function() {
                    if (this.checked) {
                        // Deshabilitar otros m√≥dulos
                        exaniMod.forEach(cb => {
                            if (cb !== premedicina) {
                                cb.disabled = true;
                                cb.checked = false;
                            }
                        });
                        showWarning('Premedicina cuenta por 2 m√≥dulos. No puedes seleccionar otros m√≥dulos.');
                    } else {
                        // Habilitar otros m√≥dulos
                        exaniMod.forEach(cb => {
                            cb.disabled = false;
                        });
                        clearWarning();
                    }
                    updateExaniModState();
                });
            }
        }

        function updateExaniModState() {
            const exaniMod = document.querySelectorAll('.exani-mod:not([value="EXANI II MOD13"])');
            const checkedMod = document.querySelectorAll('.exani-mod:checked:not([value="EXANI II MOD13"])');
            const premedicina = document.querySelector('input[value="EXANI II MOD13"]:checked');
            
            // Si premedicina est√° seleccionada, no hay l√≠mite adicional
            if (premedicina) {
                exaniMod.forEach(cb => cb.disabled = true);
                return;
            }
            
            // Limitar a 2 m√≥dulos (sin contar premedicina)
            if (checkedMod.length >= 2) {
                exaniMod.forEach(cb => {
                    if (!cb.checked) cb.disabled = true;
                });
            } else {
                exaniMod.forEach(cb => cb.disabled = false);
            }
        }

        function setupExportControls() {
            const exportBtn = document.getElementById('exportBtn');
            const exportModal = document.getElementById('exportModal');
            const cancelExport = document.getElementById('cancelExport');
            const confirmExport = document.getElementById('confirmExport');
            
            exportBtn.addEventListener('click', () => {
                exportModal.classList.add('active');
            });
            
            cancelExport.addEventListener('click', () => {
                exportModal.classList.remove('active');
            });
            
            confirmExport.addEventListener('click', () => {
                exportModal.classList.remove('active');
                exportToTXT();
            });
            
            // Cerrar modal haciendo clic fuera
            exportModal.addEventListener('click', (e) => {
                if (e.target === exportModal) {
                    exportModal.classList.remove('active');
                }
            });
        }

        // ============================================
        // FUNCIONES DE FILTRADO
        // ============================================
        function getActiveFilters() {
            const filters = new Set();
            
            // Obtener selecciones de radios (UNAM, IPN, UAM, BUAP)
            document.querySelectorAll('input[type="radio"]:checked').forEach(radio => {
                if (radio.value) filters.add(radio.value);
            });
            
            // Obtener selecciones de checkboxes (EXANI II, USEP, PAA)
            document.querySelectorAll('input[type="checkbox"]:checked').forEach(checkbox => {
                if (checkbox.value) filters.add(checkbox.value);
            });
            
            return filters;
        }

        function expandFilters(filters) {
            const expanded = new Set(filters);
            
            // Agregar tags generales de universidades
            filters.forEach(filter => {
                // Si es un √°rea espec√≠fica, agregar la universidad general
                if (filter.includes('UNAM ') && filter !== 'UNAM') expanded.add('UNAM');
                if (filter.includes('IPN ') && filter !== 'IPN') expanded.add('IPN');
                if (filter.includes('UAM ') && filter !== 'UAM') expanded.add('UAM');
                if (filter.includes('BUAP ') && filter !== 'BUAP') expanded.add('BUAP');
                
                // Para EXANI II, si se selecciona un m√≥dulo, tambi√©n incluir "EXANI II" general
                if (filter.startsWith('EXANI II')) {
                    expanded.add('EXANI II');
                }
            });
            
            // Siempre incluir GENERAL
            expanded.add('GENERAL');
            
            return expanded;
        }

        function shouldShowItem(item, expandedFilters) {
            // Si no hay filtros, mostrar todo
            if (expandedFilters.size === 0) return true;
            
            // Verificar si alguno de los tags del √≠tem est√° en los filtros expandidos
            const hasMatchingTag = item.tags.some(tag => expandedFilters.has(tag));
            
            if (hasMatchingTag) return true;
            
            // Si el √≠tem tiene hijos, verificar si alguno hijo debe mostrarse
            if (item.children && item.children.length > 0) {
                return item.children.some(child => shouldShowItem(child, expandedFilters));
            }
            
            return false;
        }

        function applyFilters() {
            const activeFilters = getActiveFilters();
            currentFilters = activeFilters;
            expandedFilters = expandFilters(activeFilters);
            
            // Actualizar estad√≠sticas
            updateFilterStatus();
            
            // Validar l√≠mites
            if (!validateFilters(activeFilters)) {
                return;
            }
            
            // Renderizar temario con filtros
            renderTemario();
            
            // Actualizar contador de √≠tems visibles
            updateVisibleItemsCount();
        }

        function validateFilters(filters) {
            const warningMsg = document.getElementById('warningMsg');
            warningMsg.classList.remove('show');
            warningMsg.textContent = '';
            
            // Contar selecciones EXANI II
            const exaniFilters = Array.from(filters).filter(f => 
                f.startsWith('EXANI II') && !['EXANI II', 'EXANI II MAT', 'EXANI II ESP', 'EXANI II ENG'].includes(f)
            );
            const exaniTronco = Array.from(filters).filter(f => 
                ['EXANI II MAT', 'EXANI II ESP', 'EXANI II ENG'].includes(f)
            );
            
            let exaniCount = exaniTronco.length + exaniFilters.length;
            
            // Premedicina cuenta doble
            if (filters.has('EXANI II MOD13')) {
                exaniCount += 1; // Ya cont√≥ 1, sumar 1 m√°s
            }
            
            if (exaniCount > 5) {
                showWarning('EXANI II: M√°ximo 5 selecciones (3 tronco com√∫n + 2 m√≥dulos)');
                return false;
            }
            
            // Validar que no haya m√°s de un √°rea por universidad
            const unamCount = Array.from(filters).filter(f => f.startsWith('UNAM ')).length;
            const ipnCount = Array.from(filters).filter(f => f.startsWith('IPN ')).length;
            const uamCount = Array.from(filters).filter(f => f.startsWith('UAM ')).length;
            const buapCount = Array.from(filters).filter(f => f.startsWith('BUAP ')).length;
            
            if (unamCount > 1 || ipnCount > 1 || uamCount > 1 || buapCount > 1) {
                showWarning('Solo puedes seleccionar una √°rea por universidad');
                return false;
            }
            
            return true;
        }

        function showWarning(message) {
            const warningMsg = document.getElementById('warningMsg');
            warningMsg.textContent = message;
            warningMsg.classList.add('show');
            
            // Ocultar advertencia despu√©s de 5 segundos
            setTimeout(() => {
                warningMsg.classList.remove('show');
            }, 5000);
        }

        function clearWarning() {
            const warningMsg = document.getElementById('warningMsg');
            warningMsg.classList.remove('show');
        }

        // ============================================
        // FUNCIONES DE RENDERIZADO
        // ============================================
        function renderTemario() {
            const container = document.getElementById('temarioContent');
            if (!temarioData || temarioData.length === 0) {
                container.innerHTML = '<p class="loading">No hay datos del temario disponibles.</p>';
                return;
            }
            
            let html = '';
            let totalItems = 0;
            let visibleItems = 0;
            
            temarioData.forEach(block => {
                // Verificar si el bloque o sus hijos deben mostrarse
                const blockVisible = shouldShowItem(block, expandedFilters);
                if (!blockVisible) return;
                
                totalItems++;
                visibleItems++;
                
                html += renderBlock(block, expandedFilters);
            });
            
            container.innerHTML = html || '<p>No hay temas que coincidan con los filtros seleccionados.</p>';
            
            // Actualizar estad√≠sticas
            document.getElementById('temarioStats').textContent = 
                `${visibleItems} bloques visibles`;
        }

        function renderBlock(block, expandedFilters, level = 0) {
            const blockId = block.id || block.nivel;
            const isVisible = shouldShowItem(block, expandedFilters);
            
            if (!isVisible) return '';
            
            // Calcular nivel de indentaci√≥n
            const indentClass = `level-${block.nivelNum || 1}`;
            
            // Renderizar tags
            const tagsHtml = renderTags(block.tags);
            
            // Renderizar enlace
            const linkHtml = renderLink(block.contenido, block.url);
            
            let html = `
                <div class="temario-item ${indentClass}">
                    <div class="node-content">
                        <div class="node-title">${linkHtml}</div>
                        <div class="tags-container">${tagsHtml}</div>
                    </div>
            `;
            
            // Renderizar hijos si existen
            if (block.children && block.children.length > 0) {
                html += '<ul class="temario-list">';
                block.children.forEach(child => {
                    html += renderItem(child, expandedFilters, level + 1);
                });
                html += '</ul>';
            }
            
            html += '</div>';
            return html;
        }

        function renderItem(item, expandedFilters, level = 0) {
            const isVisible = shouldShowItem(item, expandedFilters);
            if (!isVisible) return '';
            
            const indentClass = `level-${item.nivelNum || 2}`;
            const tagsHtml = renderTags(item.tags);
            const linkHtml = renderLink(item.contenido, item.url);
            
            let html = `
                <li class="temario-item ${indentClass}">
                    <div class="node-content">
                        <div class="node-title">${linkHtml}</div>
                        <div class="tags-container">${tagsHtml}</div>
                    </div>
            `;
            
            // Renderizar hijos si existen
            if (item.children && item.children.length > 0) {
                html += '<ul class="temario-list">';
                item.children.forEach(child => {
                    html += renderItem(child, expandedFilters, level + 1);
                });
                html += '</ul>';
            }
            
            html += '</li>';
            return html;
        }

        function renderTags(tags) {
            if (!tags || !Array.isArray(tags)) return '';
            
            // Ordenar tags: GENERAL primero, luego alfab√©tico
            const sortedTags = [...tags].sort((a, b) => {
                if (a === 'GENERAL') return -1;
                if (b === 'GENERAL') return 1;
                return a.localeCompare(b);
            });
            
            return sortedTags.map(tag => {
                const tagClass = tag === 'GENERAL' ? 'tag general' : `tag ${tag.split(' ')[0]}`;
                return `<span class="${tagClass}" title="${tag}">${tag}</span>`;
            }).join('');
        }

        function renderLink(text, url) {
            // AQU√ç ESTABA EL PROBLEMA: Eliminamos la restricci√≥n del link de "espera un poco"
            if (!url || url.trim() === '') {
                return `<span class="disabled">${text}</span>`;
            }
 
            // Asegurar que la URL tenga protocolo
            let finalUrl = url.trim();
            if (!finalUrl.startsWith('http://') && !finalUrl.startsWith('https://')) {
                finalUrl = 'https://' + finalUrl;
            }
 
            return `<a href="${finalUrl}" target="_blank" title="Abrir recurso">${text}</a>`;
        }

        // ============================================
        // FUNCIONES DE EXPORTACI√ìN (SOLO TXT)
        // ============================================
        function exportToTXT() {
            let txtContent = "====================================================\n";
            txtContent += "TEMARIO GENERADO POR CEPREDIX - TEMARIO MAESTRO 2026\n";
            txtContent += "====================================================\n\n";
            txtContent += "¬°Gracias por usar el generador de temarios de CEPREDIX ‚ù§\n\n";
            txtContent += "Deseamos que te sea √∫til esta herramienta para tu preparaci√≥n universitaria.\n";
            txtContent += "Si est√°s buscando una opci√≥n para prepararte excelentemente para ingresar a la\n";
            txtContent += "universidad, te invitamos a conocer nuestra propuesta completa.\n\n";
            txtContent += "Manda mensaje al: 777 451 6364\n\n";
            txtContent += "====================================================\n";
            txtContent += `Filtros aplicados: ${document.getElementById('filterStatus').textContent}\n`;
            txtContent += `Estad√≠sticas: ${document.getElementById('temarioStats').textContent}\n`;
            txtContent += `Exportado: ${new Date().toLocaleDateString()}\n`;
            txtContent += "====================================================\n\n";
            txtContent += "TEMARIO FILTRADO:\n";
            txtContent += "=================\n\n";
 
            // Funci√≥n recursiva para agregar contenido SIN TAGS
            function addItems(items, level = 0) {
                items.forEach(item => {
                    if (!shouldShowItem(item, expandedFilters)) return;

                    const indent = '  '.repeat(level);
                    txtContent += `${indent}${item.nivel}. ${item.contenido}\n`;


                    txtContent += '\n';

                    if (item.children && item.children.length > 0) {
                        addItems(item.children, level + 1);
                    }
                });
            }

            addItems(temarioData);

            // Crear y descargar archivo
            try {
                const blob = new Blob([txtContent], { type: 'text/plain;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `Temario-CEPREDIX-${new Date().toISOString().split('T')[0]}.txt`;
                document.body.appendChild(a);
                a.click();
                setTimeout(() => {
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }, 100);
            } catch (error) {
                console.error('Error generando TXT:', error);
                alert('Error al generar el archivo TXT.');
            }
        }

        // ============================================
        // FUNCIONES AUXILIARES
        // ============================================
        function updateFilterStatus() {
            const filters = getActiveFilters();
            const statusElement = document.getElementById('filterStatus');
            
            if (filters.size === 0) {
                statusElement.textContent = 'No hay filtros aplicados';
                return;
            }
            
            const filterList = Array.from(filters).join(', ');
            statusElement.textContent = `Filtros activos: ${filterList}`;
        }

        function updateVisibleItemsCount() {
            if (!temarioData || temarioData.length === 0) return;
            
            let totalBlocks = 0;
            let visibleBlocks = 0;
            let totalItems = 0;
            let visibleItems = 0;
            
            function countItems(items) {
                items.forEach(item => {
                    totalItems++;
                    const isVisible = shouldShowItem(item, expandedFilters);
                    if (isVisible) visibleItems++;
                    
                    if (item.children && item.children.length > 0) {
                        countItems(item.children);
                    }
                });
            }
            
            temarioData.forEach(block => {
                totalBlocks++;
                const isVisible = shouldShowItem(block, expandedFilters);
                if (isVisible) visibleBlocks++;
                
                countItems([block]);
            });
            
            document.getElementById('temarioStats').textContent = 
                `${visibleBlocks}/${totalBlocks} bloques ‚Ä¢ ${visibleItems}/${totalItems} temas`;
        }

        // ============================================
        // INICIALIZACI√ìN FINAL
        // ============================================
        // Exponer funciones para debugging
        window.debug = {
            getTemarioData: () => temarioData,
            getCurrentFilters: () => Array.from(currentFilters),
            getExpandedFilters: () => Array.from(expandedFilters),
            applyFilters: applyFilters,
            loadTemario: loadTemario
        };
    </script>
</body>
</html>
